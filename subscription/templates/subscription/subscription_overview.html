{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}
  {% trans "Your Subscription" %}
{% endblock %}
{% block css %}
  <style> .btn-link{
    color: #DAA520; /* Gold color */
  }
  </style>
{% endblock %}

{% block content %}
  <section class="container py-5">
    <header class="mb-4">
      <a href="javascript:history.back()" class="btn btn-link p-0 text-decoration-none" class="bi bi-arrow-left-circle-fill me-2 align-middle">{% trans "Back" %}</a>
      <h1 class="d-flex align-items-center justify-content-between mb-3">{% trans "Your subscription" %}</h1>
      <p class="text-body-secondary mb-0">{% trans "View your current subscription, task limits, billing period and status. You can change your subscription, cancel at the end of the period or resume anytime." %}</p>
    </header>

    <!-- Summary -->
    <section class="card border-0 shadow-sm mb-4">
      <div class="card-body">
        <div class="row g-3 align-items-center">
          <div class="col-12 col-md-7">
            <div class="d-flex flex-wrap align-items-center gap-2">
              <span class="badge bg-primary-subtle text-primary text-uppercase fw-semibold">{% trans "subscription" %}</span>
              <h2 class="h5 mb-0 text-capitalize">{{ subscription.product_name }}</h2>
              <span class="badge bg-secondary-subtle text-secondary">{{ subscription.tasks_quota }} {% trans "tasks / month" %}</span>
            </div>

            <div class="mt-2 d-flex flex-wrap gap-3">
              <div class="d-inline-flex align-items-center gap-2">
                <i class="bi bi-shield-check" aria-hidden="true"></i>
                <span class="fw-semibold">{% trans "Status:" %}</span>
                <span class="text-capitalize">
                  {% if subscription.end_date %}
                    {% trans "canceling (ends" %} {{ subscription.end_date }}{% trans ")" %}
                  {% else %}
                    {% trans "active" %}
                  {% endif %}
                </span>
              </div>
            </div>

            <div class="mt-2 small text-body-secondary">
              {% trans "Started on:" %} <time datetime="{{ subscription.start_date|date:'c' }}">{{ subscription.start_date }}</time>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Actions -->
    <div class="row g-4">
      <div class="col-lg-7">
        <section class="card border-0 shadow-sm h-100">
          <div class="card-body">
            <h3 class="h5 mb-3">{% trans "Manage subscription" %}</h3>

            <a href="{% url 'subscription_manage_stripe' %}" class="btn btn-primary d-inline-flex align-items-center gap-2 px-4 py-2 text-nowrap" target="_blank" rel="noopener">
              <i class="bi bi-arrow-repeat" aria-hidden="true"></i>
              <span>{% trans "Change your Subscription" %}</span>
            </a>
          </div>
        </section>
      </div>
    </div>
  </section>
{% endblock %}
