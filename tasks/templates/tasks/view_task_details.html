{% extends 'base.html' %}
{% load static %}
{% load render_proof %}
{% block meta %}

{% endblock %}
{% block title %}

{% endblock %}
{% block css %}

{% endblock %}
{% block content %}
<div class="container">
  <h1>Task Details</h1>
  <div class="task-details">
    <h2>{{ task.title }}</h2>
    <p>{{ task.description }}</p>
    <p>Checkup Interval: {{ task.interval }}</p>
    <p>Fee for Failure: {{ task.fee }}â‚¬</p>
    <p>Points for Completion: {{ task.points }} Points</p>
    {% if task.completed == True %}
    <p>Task done succesfully: Yes</p>
    {% endif %}
    {% if not perms.tasks.mark_done %}
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ check_form.as_p }}
      <button type="submit" name="proof_upload">Upload proof</button>
    </form>
    {% endif %}
    {% if perms.tasks.mark_done %}
    {% if task_checkup.comments %}
    <p>Comments: {{ task_checkup.comments }}</p>
    {% endif %}
    
    {% if task_checkup.image %}
      {{ task_checkup.image|render_image }}
    {% endif %}

    {% if task_checkup.text_file %}
      {{ task_checkup.text_file|render_textfile }}
    {% endif %}

    {% if task_checkup.audio_file %}
      {{ task_checkup.audio_file|render_audio }}
    {% endif %}



    <p>Task Checkup Status: {{ task_checkup.completed|yesno:"Completed,Not Completed" }}</p>

    <form method="post">
      {% csrf_token %}
      <button type="submit" name="done_checkbox">Mark as Done</button>
    </form>
    {% endif %}
  </div>
</div>
{% endblock %}